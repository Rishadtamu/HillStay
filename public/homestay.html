<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Homestays – HillStay</title>
    <meta name="description"
        content="Discover authentic, handpicked homestays in Darjeeling, Sikkim and Nagaland. Book directly with local hosts.">
    <link rel="icon" type="image/png" href="images/logo_tent_transparent.png">
    <link rel="stylesheet" href="css/hillstay.css">
    <link rel="stylesheet" href="css/https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ── Page Header ── */
        .homestay-page-header {
            padding-top: 120px;
            padding-bottom: 5rem;
            background: linear-gradient(135deg, #1a2a35 0%, #263A46 60%, #2E4755 100%);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .homestay-page-header::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url('https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=1600&q=60') center/cover no-repeat;
            opacity: 0.15;
        }

        .homestay-page-header .inner {
            position: relative;
            z-index: 2;
        }

        .homestay-page-header h1 {
            font-size: clamp(2.2rem, 5vw, 3.8rem);
            font-weight: 300;
            color: #FFFFFF;
            margin-bottom: 0.8rem;
            letter-spacing: -0.02em;
        }

        .homestay-page-header h1 span {
            color: var(--accent);
        }

        .homestay-page-header p {
            font-size: 1.15rem;
            color: rgba(255, 255, 255, 0.75);
            max-width: 560px;
            margin: 0 auto 2rem;
        }

        /* ── Filter Bar ── */
        .filter-bar {
            background: white;
            padding: 1.2rem 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.07);
            border-bottom: 1px solid #eee;
            position: sticky;
            top: 70px;
            z-index: 800;
        }

        .filter-chip {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 0.5rem 1.2rem;
            border: 1.5px solid #e0e0e0;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            background: #fafafa;
            color: var(--text-main);
            font-family: 'Etihad Altis', sans-serif;
        }

        .filter-chip:hover,
        .filter-chip.active {
            border-color: var(--accent);
            background: var(--accent);
            color: white;
        }

        .filter-chip i {
            font-size: 0.8rem;
        }

        /* ── Map Section ── */
        .map-section {
            height: 380px;
            background: linear-gradient(135deg, #d4e0e8, #b8ccd6);
            margin: 2rem 1.5rem;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .map-iframe {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border: none;
        }

        .map-overlay-info {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 1.4rem;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
            z-index: 10;
        }

        .map-overlay-info strong {
            display: block;
            color: var(--primary);
            font-size: 0.95rem;
        }

        .map-overlay-info p {
            font-size: 0.82rem;
            color: var(--text-muted);
            margin: 0;
        }

        .map-marker {
            position: absolute;
            color: var(--primary);
            font-size: 1.8rem;
            cursor: pointer;
            transition: transform 0.2s;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .map-marker:hover {
            transform: scale(1.25) translateY(-4px);
            color: var(--accent);
        }

        .map-placeholder-grid {
            width: 100%;
            height: 100%;
            background:
                linear-gradient(rgba(38, 58, 70, 0.08) 1px, transparent 1px),
                linear-gradient(90deg, rgba(38, 58, 70, 0.08) 1px, transparent 1px),
                linear-gradient(135deg, #c5d8e0 0%, #d4e8d0 50%, #e0d4b8 100%);
            background-size: 40px 40px, 40px 40px, 100% 100%;
        }

        /* ── Premium Slider Section ── */
        .premium-slider-section {
            background: linear-gradient(135deg, #263A46, #1a2a35);
            padding: 5rem 0;
            margin: 0;
        }

        .premium-slider-section .section-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 0 2rem;
        }

        .premium-slider-section h2 {
            font-size: clamp(1.8rem, 4vw, 2.8rem);
            color: #FFFFFF !important;
            font-weight: 300;
            margin-bottom: 0.8rem;
        }

        .premium-slider-section h2 span {
            color: var(--accent);
        }

        .premium-slider-section .subtitle {
            color: rgba(255, 255, 255, 0.65);
            font-size: 1rem;
        }

        .prem-slider-wrapper {
            position: relative;
            padding: 0 4rem;
        }

        .prem-track {
            display: flex;
            gap: 1.5rem;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            padding: 1rem 0.5rem 1.5rem;
        }

        .prem-track::-webkit-scrollbar {
            display: none;
        }

        .prem-card {
            flex: 0 0 300px;
            scroll-snap-align: start;
            border-radius: 16px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(10px);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .prem-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .prem-card-img {
            height: 200px;
            position: relative;
            overflow: hidden;
        }

        .prem-card-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .prem-card:hover .prem-card-img img {
            transform: scale(1.07);
        }

        .prem-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: var(--accent);
            color: white;
            padding: 4px 12px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .prem-card-body {
            padding: 1.2rem;
        }

        .prem-card-body h3 {
            color: #FFFFFF !important;
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 0.4rem;
        }

        .prem-card-body .location {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.82rem;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .prem-card-body .price {
            color: var(--accent);
            font-size: 1.15rem;
            font-weight: 700;
        }

        .prem-card-body .price span {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8rem;
            font-weight: 400;
        }

        .prem-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding-top: 0.8rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .prem-rating {
            color: var(--accent);
            font-size: 0.85rem;
        }

        .btn-prem-book {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.5rem 1.2rem;
            border-radius: 50px;
            font-size: 0.82rem;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Etihad Altis', sans-serif;
            transition: filter 0.2s, transform 0.2s;
        }

        .btn-prem-book:hover {
            filter: brightness(1.15);
            transform: translateY(-2px);
        }

        .prem-slider-nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .prem-nav-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.25);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .prem-nav-btn:hover {
            background: var(--accent);
            border-color: var(--accent);
        }

        /* ── All Homestays Section ── */
        .all-homestays-section {
            max-width: 1260px;
            margin: 0 auto;
            padding: 5rem 1.5rem;
        }

        .all-homestays-section .section-header {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2.5rem;
        }

        .all-homestays-section h2 {
            font-size: clamp(1.6rem, 4vw, 2.2rem);
            color: var(--accent);
            font-weight: 300;
        }

        .result-count {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* ── Why HillStay Strip ── */
        .why-strip {
            background: #f8f9fa;
            padding: 4rem 2rem;
            text-align: center;
        }

        .why-strip h2 {
            font-size: clamp(1.5rem, 3vw, 2rem);
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .why-strip p {
            color: var(--text-muted);
            max-width: 500px;
            margin: 0 auto 3rem;
        }

        .why-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .why-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.8rem;
        }

        .why-item .icon-circle {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent);
            font-size: 1.4rem;
        }

        .why-item h4 {
            color: var(--primary);
            font-weight: 600;
            font-size: 1rem;
        }

        .why-item p {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin: 0;
        }

        @media (max-width: 768px) {
            .filter-bar {
                gap: 0.6rem;
                padding: 0.8rem 1rem;
                top: 60px;
            }

            .prem-slider-wrapper {
                padding: 0 1rem;
            }
        }
    </style>
</head>

<body>
    <!-- ── Header ── -->
    <header class="main-header scrolled">
        <div class="header-main-tier">
            <a href="index.html" class="logo" style="color: var(--text-main) !important;">
                <img src="images/logo_tent_transparent.png" alt="HillStay Logo" class="logo-img">
                HillStay
            </a>
            <div class="header-nav-desktop">
                <a href="index.html" class="nav-item" style="color: var(--text-main) !important;">Book</a>
                <a href="trips.html" class="nav-item" style="color: var(--text-main) !important;">Manage Trips</a>
                <a href="index.html#destinations" class="nav-item"
                    style="color: var(--text-main) !important;">Destinations</a>
                <a href="experience.html" class="nav-item" style="color: var(--text-main) !important;">Experience</a>
            </div>
            <div class="header-main-right">
                <div class="header-lang-switcher" style="color: var(--text-main);">
                    <i class="fa-solid fa-globe"></i>
                    <div class="lang-dropdown">
                        <span class="lang-opt" data-lang="en">EN</span>
                        <span class="lang-opt" data-lang="hi">HI</span>
                        <span class="lang-opt" data-lang="bn">BN</span>
                        <span class="lang-opt" data-lang="ne">NE</span>
                    </div>
                </div>
                <div class="header-actions"><!-- Auth Icon via JS --></div>
                <button class="menu-toggle" aria-label="Toggle navigation" style="color: var(--text-main);">
                    <i class="fa-solid fa-bars"></i>
                </button>
            </div>
        </div>
        <!-- Mobile Sidebar -->
        <div class="nav-links">
            <button class="menu-close"><i class="fa-solid fa-xmark"></i></button>
            <a href="index.html">Book</a>
            <a href="trips.html">Manage Trips</a>
            <a href="index.html#destinations">Destinations</a>
            <a href="experience.html">Experience</a>
            <a href="reviews.html"><i class="fa-solid fa-pen-to-square"></i> Review</a>
            <a href="alerts.html">Alerts</a>
            <hr class="nav-divider">
            <a href="referral.html"><i class="fa-solid fa-gift"></i> Referral Program</a>
            <div class="header-actions-mobile mobile-only" style="padding: 1rem 1.5rem;"></div>
        </div>
    </header>

    <!-- ── Page Hero ── -->
    <div class="homestay-page-header">
        <div class="inner">
            <h1>Find Your Perfect <span>Homestay</span></h1>
            <p>Authentic stays in Darjeeling, Sikkim &amp; Nagaland — hosted by locals, loved by travellers.</p>
            <div style="display:flex; gap:1rem; justify-content:center; flex-wrap:wrap;">
                <a href="#all-homestays" class="btn-prem-book" style="padding:0.8rem 2rem; font-size:0.95rem;">
                    <i class="fa-solid fa-magnifying-glass"></i> Browse All Stays
                </a>
                <a href="#map-view" class="btn-prem-book"
                    style="padding:0.8rem 2rem; font-size:0.95rem; background:rgba(255,255,255,0.15); backdrop-filter:blur(5px); border:1px solid rgba(255,255,255,0.3);">
                    <i class="fa-solid fa-map-location-dot"></i> View on Map
                </a>
            </div>
        </div>
    </div>

    <!-- ── Filter Bar ── -->
    <div class="filter-bar">
        <span
            style="font-size:0.8rem; color:var(--text-muted); font-weight:600; text-transform:uppercase; letter-spacing:0.5px;">Filter:</span>
        <button class="filter-chip active" onclick="filterStays('all', this)"><i class="fa-solid fa-border-all"></i>
            All</button>
        <button class="filter-chip" onclick="filterStays('darjeeling', this)"><i class="fa-solid fa-mountain"></i>
            Darjeeling</button>
        <button class="filter-chip" onclick="filterStays('sikkim', this)"><i class="fa-solid fa-leaf"></i>
            Sikkim</button>
        <button class="filter-chip" onclick="filterStays('nagaland', this)"><i class="fa-solid fa-fire"></i>
            Nagaland</button>
        <button class="filter-chip" onclick="filterStays('premium', this)"><i class="fa-solid fa-star"></i>
            Premium</button>
        <div style="margin-left:auto; display:flex; align-items:center; gap:0.5rem;">
            <label style="font-size:0.82rem; color:var(--text-muted);">Sort by:</label>
            <select id="sort-select" onchange="sortStays(this.value)"
                style="border:1.5px solid #e0e0e0; border-radius:8px; padding:0.4rem 0.8rem; font-family:'Etihad Altis',sans-serif; font-size:0.85rem; outline:none; color:var(--text-main);">
                <option value="default">Recommended</option>
                <option value="price-asc">Price: Low to High</option>
                <option value="price-desc">Price: High to Low</option>
                <option value="rating">Top Rated</option>
            </select>
        </div>
    </div>

    <!-- ── Map Section ── -->
    <div id="map-view" style="padding-top:1rem;">
        <div class="map-section">
            <iframe class="map-iframe"
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d227748.38256!2d88.1!3d27.05!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39e42e4bfca7e423%3A0x453fee3c6f1d0c7d!2sDarjeeling%2C%20West%20Bengal!5e0!3m2!1sen!2sin!4v1700000000000!5m2!1sen!2sin"
                allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            <div class="map-overlay-info">
                <strong><i class="fa-solid fa-map-location-dot" style="color:var(--accent);"></i> Map View</strong>
                <p>Showing homestays in Darjeeling &amp; surrounds</p>
            </div>
        </div>
    </div>

    <!-- ── Premium Homestays Slider ── -->
    <section class="premium-slider-section">
        <div class="section-header">
            <h2><span>Premium</span> Homestays</h2>
            <p class="subtitle">Curated luxury stays with exceptional host experiences</p>
        </div>
        <div class="prem-slider-wrapper">
            <div class="prem-track" id="premTrack">

                <div class="prem-card">
                    <div class="prem-card-img">
                        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?q=80&w=600&auto=format&fit=crop"
                            alt="Makaibari Estate">
                        <div class="prem-badge">Bestseller</div>
                    </div>
                    <div class="prem-card-body">
                        <h3>Makaibari Tea Bungalow</h3>
                        <div class="location"><i class="fa-solid fa-location-dot"></i> Kurseong, Darjeeling</div>
                        <div class="price">₹4,500 <span>/ night</span></div>
                        <div class="prem-card-footer">
                            <div class="prem-rating"><i class="fa-solid fa-star"></i> 4.9 (312 reviews)</div>
                            <button class="btn-prem-book"
                                onclick="openBookingModal('Makaibari Tea Bungalow', 4500)">Book Now</button>
                        </div>
                    </div>
                </div>

                <div class="prem-card">
                    <div class="prem-card-img">
                        <img src="https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?q=80&w=600&auto=format&fit=crop"
                            alt="Forest Retreat">
                        <div class="prem-badge">Premium</div>
                    </div>
                    <div class="prem-card-body">
                        <h3>Hidden Forest Retreat</h3>
                        <div class="location"><i class="fa-solid fa-location-dot"></i> Pelling, Sikkim</div>
                        <div class="price">₹5,200 <span>/ night</span></div>
                        <div class="prem-card-footer">
                            <div class="prem-rating"><i class="fa-solid fa-star"></i> 4.8 (187 reviews)</div>
                            <button class="btn-prem-book" onclick="openBookingModal('Hidden Forest Retreat', 5200)">Book
                                Now</button>
                        </div>
                    </div>
                </div>

                <div class="prem-card">
                    <div class="prem-card-img">
                        <img src="https://images.unsplash.com/photo-1570220104815-5e042c341a7d?q=80&w=600&auto=format&fit=crop"
                            alt="Naga Heritage">
                        <div class="prem-badge">Unique</div>
                    </div>
                    <div class="prem-card-body">
                        <h3>Naga Heritage Longhouse</h3>
                        <div class="location"><i class="fa-solid fa-location-dot"></i> Khonoma, Nagaland</div>
                        <div class="price">₹3,800 <span>/ night</span></div>
                        <div class="prem-card-footer">
                            <div class="prem-rating"><i class="fa-solid fa-star"></i> 4.95 (94 reviews)</div>
                            <button class="btn-prem-book"
                                onclick="openBookingModal('Naga Heritage Longhouse', 3800)">Book Now</button>
                        </div>
                    </div>
                </div>

                <div class="prem-card">
                    <div class="prem-card-img">
                        <img src="https://images.unsplash.com/photo-1601918774946-25832a4be0d6?q=80&w=600&auto=format&fit=crop"
                            alt="Kanchenjunga View">
                        <div class="prem-badge">Mountain View</div>
                    </div>
                    <div class="prem-card-body">
                        <h3>Kanchenjunga View Villa</h3>
                        <div class="location"><i class="fa-solid fa-location-dot"></i> Gangtok, Sikkim</div>
                        <div class="price">₹6,000 <span>/ night</span></div>
                        <div class="prem-card-footer">
                            <div class="prem-rating"><i class="fa-solid fa-star"></i> 4.7 (256 reviews)</div>
                            <button class="btn-prem-book"
                                onclick="openBookingModal('Kanchenjunga View Villa', 6000)">Book Now</button>
                        </div>
                    </div>
                </div>

                <div class="prem-card">
                    <div class="prem-card-img">
                        <img src="https://images.unsplash.com/photo-1530789253388-582c481c54b0?q=80&w=600&auto=format&fit=crop"
                            alt="Lakeside Bungalow">
                        <div class="prem-badge">Lakeside</div>
                    </div>
                    <div class="prem-card-body">
                        <h3>Mirik Lakeside Bungalow</h3>
                        <div class="location"><i class="fa-solid fa-location-dot"></i> Mirik, Darjeeling</div>
                        <div class="price">₹3,200 <span>/ night</span></div>
                        <div class="prem-card-footer">
                            <div class="prem-rating"><i class="fa-solid fa-star"></i> 4.6 (145 reviews)</div>
                            <button class="btn-prem-book"
                                onclick="openBookingModal('Mirik Lakeside Bungalow', 3200)">Book Now</button>
                        </div>
                    </div>
                </div>

            </div>

            <div class="prem-slider-nav">
                <button class="prem-nav-btn" id="premPrev" aria-label="Previous"><i
                        class="fa-solid fa-chevron-left"></i></button>
                <button class="prem-nav-btn" id="premNext" aria-label="Next"><i
                        class="fa-solid fa-chevron-right"></i></button>
            </div>
        </div>
    </section>

    <!-- ── All Homestays ── -->
    <div class="all-homestays-section" id="all-homestays">
        <div class="section-header">
            <h2 class="section-title">All Homestays</h2>
            <span class="result-count" id="result-count">Loading...</span>
        </div>
        <div class="listing-grid" id="listing-grid">
            <!-- Rendered by JS -->
        </div>
    </div>

    <!-- ── Why HillStay ── -->
    <section class="why-strip">
        <h2>Why Book with HillStay?</h2>
        <p>Every stay is personally verified by our local team for authenticity and comfort.</p>
        <div class="why-grid">
            <div class="why-item">
                <div class="icon-circle"><i class="fa-solid fa-shield-check"></i></div>
                <h4>Verified Hosts</h4>
                <p>Every host is background-checked and personally onboarded.</p>
            </div>
            <div class="why-item">
                <div class="icon-circle"><i class="fa-solid fa-handshake"></i></div>
                <h4>Local Immersion</h4>
                <p>Authentic cultural experiences you won't find in hotels.</p>
            </div>
            <div class="why-item">
                <div class="icon-circle"><i class="fa-solid fa-headset"></i></div>
                <h4>24/7 Support</h4>
                <p>Our team is always on hand before, during and after your stay.</p>
            </div>
            <div class="why-item">
                <div class="icon-circle"><i class="fa-solid fa-rotate-left"></i></div>
                <h4>Free Cancellation</h4>
                <p>Cancel up to 48 hours before check-in with no charges.</p>
            </div>
        </div>
    </section>

    <!-- ── Footer ── -->
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-col">
                <div class="footer-logo"><img src="images/logo_tent_transparent.png" alt="HillStay Logo"></div>
                <p style="font-size:0.85rem; color:#bbb; line-height:1.6;">Your gateway to authentic hill-country
                    experiences in Northeast India.</p>
            </div>
            <div class="footer-col">
                <h4>Explore</h4>
                <ul>
                    <li><a href="homestay.html">Homestays</a></li>
                    <li><a href="restaurant.html">Restaurants</a></li>
                    <li><a href="trekking.html">Trekking</a></li>
                    <li><a href="experience.html">Experiences</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Company</h4>
                <ul>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="reviews.html">Reviews</a></li>
                    <li><a href="referral.html">Referral Program</a></li>
                    <li><a href="support.html">Support</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Legal</h4>
                <ul>
                    <li><a href="terms.html">Terms &amp; Conditions</a></li>
                    <li><a href="privacy.html">Privacy Policy</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom"
            style="text-align:center; margin-top:3rem; padding-top:1.5rem; border-top:1px solid rgba(255,255,255,0.07); color:#888; font-size:0.85rem;">
            &copy; 2026 HillStay LLC. All rights reserved.
        </div>
    </footer>

    <script src="js/hillstay.js"></script>
    <script>
        // ── Render listing cards ──
        document.addEventListener('DOMContentLoaded', () => {
            loadHomestays('all');

            // Premium slider nav
            const track = document.getElementById('premTrack');
            document.getElementById('premNext').addEventListener('click', () => {
                track.scrollBy({ left: 320, behavior: 'smooth' });
            });
            document.getElementById('premPrev').addEventListener('click', () => {
                track.scrollBy({ left: -320, behavior: 'smooth' });
            });
        });

        function loadHomestays(filter) {
            let items = typeof listings !== 'undefined'
                ? listings.filter(l => l.category === 'homestay')
                : getFallbackHomestays();

            if (filter === 'darjeeling') items = items.filter(l => l.location && l.location.toLowerCase().includes('darjeeling'));
            if (filter === 'sikkim') items = items.filter(l => l.location && l.location.toLowerCase().includes('sikkim'));
            if (filter === 'nagaland') items = items.filter(l => l.location && l.location.toLowerCase().includes('nagaland'));
            if (filter === 'premium') items = items.filter(l => l.badge === 'Premium' || (l.price && l.price >= 4000));

            document.getElementById('result-count').textContent = items.length + ' stays found';

            if (typeof renderListings === 'function') {
                renderListings(items, 'listing-grid');
            } else {
                renderFallbackCards(items);
            }
        }

        function filterStays(filter, btn) {
            document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
            btn.classList.add('active');
            loadHomestays(filter);
        }

        function sortStays(method) {
            const grid = document.getElementById('listing-grid');
            const cards = Array.from(grid.querySelectorAll('.listing-card'));
            cards.sort((a, b) => {
                const priceA = parseInt(a.dataset.price || 0);
                const priceB = parseInt(b.dataset.price || 0);
                const ratingA = parseFloat(a.dataset.rating || 0);
                const ratingB = parseFloat(b.dataset.rating || 0);
                if (method === 'price-asc') return priceA - priceB;
                if (method === 'price-desc') return priceB - priceA;
                if (method === 'rating') return ratingB - ratingA;
                return 0;
            });
            cards.forEach(c => grid.appendChild(c));
        }

        function getFallbackHomestays() {
            return [
                { id: 1, title: "Makaibari Tea Bungalow", location: "Kurseong, Darjeeling", price: 4500, rating: 4.9, reviews: 312, badge: "Bestseller", category: "homestay", image: "https://images.unsplash.com/photo-1566073771259-6a8506099945?w=600&q=70" },
                { id: 2, title: "Hidden Forest Retreat", location: "Pelling, Sikkim", price: 5200, rating: 4.8, reviews: 187, badge: "Premium", category: "homestay", image: "https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=600&q=70" },
                { id: 3, title: "Naga Heritage Longhouse", location: "Khonoma, Nagaland", price: 3800, rating: 4.95, reviews: 94, badge: "Unique", category: "homestay", image: "https://images.unsplash.com/photo-1570220104815-5e042c341a7d?w=600&q=70" },
                { id: 4, title: "Kanchenjunga View Villa", location: "Gangtok, Sikkim", price: 6000, rating: 4.7, reviews: 256, badge: "Mountain View", category: "homestay", image: "https://images.unsplash.com/photo-1601918774946-25832a4be0d6?w=600&q=70" },
                { id: 5, title: "Mirik Lakeside Bungalow", location: "Mirik, Darjeeling", price: 3200, rating: 4.6, reviews: 145, badge: "Lakeside", category: "homestay", image: "https://images.unsplash.com/photo-1530789253388-582c481c54b0?w=600&q=70" },
                { id: 6, title: "Kalimpong Heritage Home", location: "Kalimpong, Darjeeling", price: 2800, rating: 4.5, reviews: 89, badge: "Heritage", category: "homestay", image: "https://images.unsplash.com/photo-1596700209699-7d8cc1ab1e48?w=600&q=70" },
            ];
        }

        function renderFallbackCards(items) {
            const grid = document.getElementById('listing-grid');
            grid.innerHTML = items.map(item => `
                <div class="listing-card" data-price="${item.price}" data-rating="${item.rating}">
                    <div class="card-img-container">
                        <img src="${item.image}" alt="${item.title}" loading="lazy">
                        <div class="card-badge">${item.badge || 'Stay'}</div>
                        <button class="favorite-btn" title="Save to wishlist"><i class="fa-regular fa-heart"></i></button>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${item.title}</h3>
                        <div class="card-location"><i class="fa-solid fa-location-dot"></i> ${item.location}</div>
                        <div class="card-rating">
                            <div class="bubbles"><i class="fa-solid fa-star" style="color:var(--accent);"></i></div>
                            <span style="font-weight:700; font-size:0.9rem;">${item.rating}</span>
                            <span class="review-count">(${item.reviews} reviews)</span>
                        </div>
                        <div class="card-price">₹${item.price.toLocaleString()} <span style="font-size:0.8rem; font-weight:400; color:var(--text-muted);">/ night</span></div>
                        <button class="btn-book" style="width:100%; margin-top:0.8rem;" onclick="openBookingModal('${item.title}', ${item.price})">Book Now</button>
                    </div>
                </div>
            `).join('');
        }
    </script>
</body>

</html>